function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),stripe=Stripe("pk_live_Slcf10nWrmawjID0q88zkbLW00YhOnmx3e"),SectionTitle=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){return React.createElement("div",{className:"row section-title"},React.createElement("div",{className:"col-12"},React.createElement("h2",{className:"mb-1 mt-3"},this.props.title)))}}]),t}(React.Component),BillingCycleSwitcher=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e=this;return React.createElement("div",{className:"row"},React.createElement("div",{className:"card billing-cycle"},React.createElement("div",{className:"card-body"},React.createElement("div",{className:"bc-item "+("monthly"==this.props.billingCycle?"selected":""),onClick:function(){return e.props.changeBillingCycle("monthly")}},"Monthly"),React.createElement("div",{className:"bc-item "+("yearly"==this.props.billingCycle?"selected":""),onClick:function(){return e.props.changeBillingCycle("yearly")}},"Yearly"))))}}]),t}(React.Component),PlanCard=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e=this;return React.createElement("div",{className:"col-lg-6"},React.createElement("div",{className:"card plan "+(this.props.active?"active":"card-hover"),onClick:function(){return e.props.changePlan(e.props.name)}},"Standard"==this.props.name&&React.createElement("div",{className:"most-popular-pill"},React.createElement("span",{className:"badge badge-pill badge-soft-red",style:this.props.active?{background:"#0163ff"}:{background:"#ff3a60"}},"Most Popular")),React.createElement("div",{className:"card-body p-3"},React.createElement("div",{className:"radio"},React.createElement("i",null)),React.createElement("div",{className:"name"},this.props.name),React.createElement("div",{className:"features"},React.createElement("div",{className:"feature"},this.props.features.data,"GB High-speed Data"),React.createElement("div",{className:"feature"},0==this.props.features.devices?"Unlimted":this.props.features.devices+" Connected"," Devices")),React.createElement("div",{className:"price"},this.props.price),React.createElement("div",{className:"per-month"},"per month"),React.createElement("div",null,React.createElement("span",{className:"badge badge-pill "+(0==this.props.savePercent?"badge-soft-grey":"badge-soft-red")},"Save ",this.props.savePercent,"%")),React.createElement("div",{className:"billed"},React.createElement("del",null,"$",this.props.originalTotalPrice)," $",this.props.totalPrice," billed ",this.props.billingCycle.toLowerCase()))),React.createElement("div",{className:"card tips "+(this.props.active?"active":"")},React.createElement("div",{className:"card-body"},React.createElement("ul",null,React.createElement("li",null,React.createElement("strong",null,"Save ",React.createElement("span",null,this.props.savePercentByBilledYearly,"%"))," by billed yearly"),"Standard"==this.props.name&&React.createElement("li",null,"Upgrade to Premium plan anytime"),"Premium"==this.props.name&&React.createElement("li",null,"Extra data package available")))))}}]),t}(React.Component),PlanSection=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e=this,t=this.props.plans,a=t.map(function(t){var a=e.props.selectedPlan==t.name.toLowerCase(),r=t.prices[e.props.billingCycle],n={monthly:1,yearly:12},l=t.prices.monthly*n[e.props.billingCycle],c=t.prices[e.props.billingCycle]*n[e.props.billingCycle],s=(l-c)/l*100,i=(t.prices.monthly-t.prices.yearly)/t.prices.monthly*100;return React.createElement(PlanCard,{key:t.name,billingCycle:e.props.billingCycle,changePlan:e.props.changePlan,name:t.name,features:t.features,price:r,totalPrice:c.toFixed(2),originalTotalPrice:l.toFixed(2),savePercent:s.toFixed(0),savePercentByBilledYearly:i.toFixed(0),active:a})});return React.createElement("div",{className:"row"},a)}}]),t}(React.Component),EnterEmail=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e=this.props.userEmail;return React.createElement("div",{className:"row"},React.createElement("div",{className:"col-12"},React.createElement("div",{className:"card email"},React.createElement("div",{className:"card-body p-3 ml-2"},React.createElement("h5",null,"Enter email address"),React.createElement("input",{type:"email",className:"form-control mt-3"+(0==e.valid&&""!=e.value?" invalid":""),onBlur:this.props.changeUserEmail,placeholder:"Your email address"}),React.createElement("div",{className:"invalid-feedback",style:0==e.valid&&""!=e.value?{display:"block"}:null},React.createElement("i",{className:"uil uil-exclamation-triangle"})," Please enter correct email address"),React.createElement("p",{className:"small-text mt-2 pb-0"},"We will not share your information or send spam.")))))}}]),t}(React.Component),Payment=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e=this,t=window.innerWidth;return t>=992?"creditCards"==this.props.type?React.createElement("div",{className:"card "+(this.props.type==this.props.selectedPayment?"active":"card-hover")},React.createElement("div",{className:"card-body",onClick:function(){return e.props.changePayment(e.props.type)}},React.createElement("div",{className:"radio"}),React.createElement("div",{className:"right-side"},React.createElement("div",{className:"name"},this.props.name),React.createElement("div",{className:"logos"},React.createElement("img",{src:"/img/visa.svg"}),React.createElement("img",{src:"/img/mastercard.svg"}),React.createElement("img",{src:"/img/amex.svg"}))))):React.createElement("div",{className:"card "+(this.props.type==this.props.selectedPayment?"active":"card-hover")},React.createElement("div",{className:"card-body",onClick:function(){return e.props.changePayment(e.props.type)}},React.createElement("div",{className:"radio"}),React.createElement("div",{className:"right-side"},React.createElement("div",{className:"name"},this.props.name),React.createElement("img",{src:"/img/"+this.props.type.toLowerCase()+".svg"})))):"creditCards"==this.props.type?React.createElement("div",{className:"card-body "+(this.props.type==this.props.selectedPayment?"active":""),onClick:function(){return e.props.changePayment(e.props.type)}},React.createElement("div",{className:"radio"}),React.createElement("div",{className:"right-side"},React.createElement("div",{className:"name"},this.props.name),React.createElement("div",{className:"logos"},React.createElement("img",{src:"/img/visa.svg"}),React.createElement("img",{src:"/img/mastercard.svg"}),React.createElement("img",{src:"/img/amex.svg"})))):React.createElement("div",{className:"card-body border-top "+(this.props.type==this.props.selectedPayment?"active":""),onClick:function(){return e.props.changePayment(e.props.type)}},React.createElement("div",{className:"radio"}),React.createElement("div",{className:"right-side"},React.createElement("div",{className:"name"},this.props.name),React.createElement("img",{src:"/img/"+this.props.type.toLowerCase()+".svg"})))}}]),t}(React.Component),PaymentForm=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){return 1==this.props.handlingContinue?React.createElement("div",null,React.createElement("a",{href:"##",className:"btn btn-primary btn-continue btn-block disabled"},React.createElement("span",{role:"status",className:"spinner-border"},React.createElement("span",{className:"sr-only"},"Loading...")))):React.createElement("div",null,React.createElement("a",{href:"##",className:"btn btn-primary btn-continue btn-block",onClick:this.props.handleContinue},"Continue"))}}]),t}(React.Component),Checkout=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e=this,t={monthly:1,yearly:12},a=null,r=!0,n=!1,l=void 0;try{for(var c,s=this.props.plans[Symbol.iterator]();!(r=(c=s.next()).done);r=!0){var i=c.value;i.name.toLowerCase()==this.props.selectedPlan&&(a=i)}}catch(e){n=!0,l=e}finally{try{!r&&s.return&&s.return()}finally{if(n)throw l}}var o=a.prices.monthly*t[this.props.billingCycle],p=a.prices[this.props.billingCycle]*t[this.props.billingCycle],m=o-p,h=m/o*100;return React.createElement("div",{className:"checkout col-lg-7"},React.createElement(EnterEmail,{changeUserEmail:this.props.changeUserEmail,userEmail:this.props.userEmail}),React.createElement("div",{className:"card"},React.createElement("div",{className:"card-body"},React.createElement("div",{className:"table-responsive"},React.createElement("table",{className:"table table-borderless mb-0 text-muted",size:"sm"},React.createElement("tbody",null,React.createElement("tr",null,React.createElement("th",null,"Selected plan"),React.createElement("td",{style:{textTransform:"capitalize"}},this.props.selectedPlan)),React.createElement("tr",null,React.createElement("th",null,"Billed"),React.createElement("td",{className:"billing-circle-inline"},React.createElement("label",{onClick:function(){return e.props.changeBillingCycle("monthly")}},React.createElement("input",{onChange:function(){return e.props.changeBillingCycle("monthly")},name:"circleInCheckout",type:"radio",checked:"monthly"==this.props.billingCycle}),React.createElement("span",null,"Monthly")),React.createElement("label",{onClick:function(){return e.props.changeBillingCycle("yearly")}},React.createElement("input",{onChange:function(){return e.props.changeBillingCycle("yearly")},name:"circleInCheckout",type:"radio",checked:"yearly"==this.props.billingCycle}),React.createElement("span",null,"Yearly")))),React.createElement("tr",null,React.createElement("th",null,"Price"),React.createElement("td",null,o.toFixed(2)," USD")),React.createElement("tr",null,React.createElement("th",null,"Discount","monthly"!=this.props.billingCycle&&React.createElement("span",{className:"color-primary"}," (Save ",h.toFixed(0),"%)")),React.createElement("td",{className:"color-success"},"- ",m.toFixed(2)," USD")),React.createElement("tr",{className:"total"},React.createElement("th",null,"Total"),React.createElement("td",null,p.toFixed(2)," USD"))))),React.createElement("div",{className:"continue-to-payment"},1==this.props.errorAlert.show&&React.createElement("div",{className:"alert mt-2 alert-danger alert-dismissible fade show",role:"alert",style:{color:"#ff5c75",backgroundColor:"rgba(255,92,117,.15)",borderColor:"rgba(255,92,117,.15)"}},this.props.errorAlert.error,React.createElement("button",{type:"button",className:"close",style:{color:"#ff5c75"},onClick:this.props.hideError},React.createElement("span",{"aria-hidden":"true"},"×"))),React.createElement(PaymentForm,{selectedPayment:this.props.selectedPayment,handlingContinue:this.props.handlingContinue,handleContinue:this.props.handleContinue}),React.createElement("p",{className:"small-text mt-5"},"By clicking ",React.createElement("strong",null,"Continue"),", you agree to our ",React.createElement("a",{href:"##",target:"blank"},"Terms of Service")," and acknowledge our ",React.createElement("a",{href:"##",target:"blank"},"Privacy Policy"),". Your subscription will automatically renew at the end of your subscription period using the payment method provided until you cancel it by ",React.createElement("a",{href:"##",target:"blank"},"turning off auto-renewal"),". If you need any help, please send us an email at ",React.createElement("strong",null,"support@meshvpn.io"))))))}}]),t}(React.Component),WhyUs=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){return React.createElement("div",{className:"why-us col-lg-5"},React.createElement("div",{className:"title"},"Why choose MeshVPN"),React.createElement("ul",null,React.createElement("li",null,"Lightning-fast servers"),React.createElement("li",null,"No activity or connection logs"),React.createElement("li",null,"Best-in-class security & encryption"),React.createElement("li",null,"Access to any websites in the world"),React.createElement("li",null,"Unblock streaming media like Netflix, HBO, Hulu, Disney+, BBC iPlayer etc."),React.createElement("li",null,"Support Windows, Androoid, iOS, Mac, Linux and more")))}}]),t}(React.Component),PaymentSection=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e=window.innerWidth;return e>=992?React.createElement("div",{className:"row"},React.createElement(Checkout,{selectedPlan:this.props.selectedPlan,changeBillingCycle:this.props.changeBillingCycle,billingCycle:this.props.billingCycle,plans:this.props.plans,handlingContinue:this.props.handlingContinue,handleContinue:this.props.handleContinue,errorAlert:this.props.errorAlert,hideError:this.props.hideError,changeUserEmail:this.props.changeUserEmail,userEmail:this.props.userEmail}),React.createElement(WhyUs,null)):React.createElement("div",{className:"row"},React.createElement(Checkout,{selectedPlan:this.props.selectedPlan,changeBillingCycle:this.props.changeBillingCycle,billingCycle:this.props.billingCycle,plans:this.props.plans,handlingContinue:this.props.handlingContinue,handleContinue:this.props.handleContinue,errorAlert:this.props.errorAlert,hideError:this.props.hideError,changeUserEmail:this.props.changeUserEmail,userEmail:this.props.userEmail}))}}]),t}(React.Component),App=function(e){function t(e){_classCallCheck(this,t);var a=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={billingCycle:"yearly",selectedPlan:"standard",userEmail:{value:"",valid:!1},handlingContinue:!1,errorAlert:{show:!1,text:""},plans:[{name:"Standard",prices:{monthly:5.99,yearly:3.99},features:{data:100,devices:5}},{name:"Premium",prices:{monthly:9.99,yearly:5.99},features:{data:200,devices:0}}]},a.changeBillingCycle=a.changeBillingCycle.bind(a),a.changePlan=a.changePlan.bind(a),a.changeUserEmail=a.changeUserEmail.bind(a),a.handleContinue=a.handleContinue.bind(a),a.hideError=a.hideError.bind(a),a}return _inherits(t,e),_createClass(t,[{key:"changeBillingCycle",value:function(e){this.setState({billingCycle:e})}},{key:"changePlan",value:function(e){this.setState({selectedPlan:e.toLowerCase()})}},{key:"changeUserEmail",value:function(e){var t=e.target.value,a=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t);this.setState({userEmail:{value:t,valid:a}})}},{key:"handleContinue",value:function(){if(""!=this.state.userEmail.value){if(!1===this.state.userEmail.valid)return this.handleError("Please enter correct email address."),0;this.setState({handlingContinue:!0});var e="/api/v1/plan/order?payment=creditCards&plan="+this.state.selectedPlan+"&billed="+this.state.billingCycle+"&email="+this.state.userEmail.value+"&action=new";this.redirectToPaymentPage(e)}else this.handleError("Please enter your email address.")}},{key:"redirectToPaymentPage",value:function(e){var t=this;fetch(e,{cache:"no-cache",method:"POST",mode:"cors"}).then(function(e){return e.json()}).then(function(e){if(!1===e.success){var a=""==e.error||null==e.error?"Server error":e.error;t.handleError(a)}else stripe.redirectToCheckout({sessionId:e.checkoutSessionId}).then(function(e){this.handleError("Failed to process payment.")})},function(e){t.handleError("Network error.")})}},{key:"handleError",value:function(e){this.setState({handlingContinue:!1,errorAlert:{show:!0,error:e}})}},{key:"hideError",value:function(){this.setState({errorAlert:{show:!1,error:""}})}},{key:"render",value:function(){return React.createElement("div",{className:""},React.createElement(SectionTitle,{title:"1. Select a plan"}),React.createElement(BillingCycleSwitcher,{billingCycle:this.state.billingCycle,changeBillingCycle:this.changeBillingCycle}),React.createElement(PlanSection,{billingCycle:this.state.billingCycle,selectedPlan:this.state.selectedPlan,plans:this.state.plans,changePlan:this.changePlan}),React.createElement(SectionTitle,{title:"2. Checkout"}),React.createElement(PaymentSection,{selectedPlan:this.state.selectedPlan,selectedPayment:this.state.selectedPayment,plans:this.state.plans,changeBillingCycle:this.changeBillingCycle,handleContinue:this.handleContinue,handlingContinue:this.state.handlingContinue,billingCycle:this.state.billingCycle,errorAlert:this.state.errorAlert,hideError:this.hideError,changeUserEmail:this.changeUserEmail,userEmail:this.state.userEmail}))}}]),t}(React.Component);ReactDOM.render(React.createElement(App,null),document.getElementById("app"));